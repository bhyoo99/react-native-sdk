<script type="module">
  import * as PortOne from 'https://cdn.portone.io/v2/browser-sdk.esm.js'
  document.addEventListener('DOMContentLoaded', () => {
    const method = new URLSearchParams(location.search).get('method')
    const request = window.requestObject ?? JSON.parse(window.ReactNativeWebView.injectedObjectJson())
    PortOne[method](request).catch((e) => {
      const error = e instanceof Error ? { ...e, message: e.message } : e
      window.ReactNativeWebView.postMessage(JSON.stringify({ error }))
    })
  })
</script>
